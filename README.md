# xsim_bash

This bash script engages the Xilinx Vivado verilog linter and xsim simulator through the shell without the need for any other scripts. You need to specify the file name for the top module, other modules are scanned from the directory. The top module's name needs to match its filename (without the extension), other files can have any name you want provided they have a `.v`/`.sv` extension. If any of the submodules are SystemVerilog, the top module should also be SystemVerilog (it should have the `.sv` extension).

## Usage and Options

Example usage: `xsim_bash top.sv --nolog --delete`

`--nolog` tells the tools not to generate log files (they sometimes listen), `--delete` tells the script to delete all files generated by the tool after running. The script will confirm before it deletes any file that already existed when you launched it.

Additionally, option `--uvm` enables UVM support by including the UVM library, and option `--noinc` makes the script ignore any files placed within any subdirectory  called "include" at any level. You can then include those files in a package. This is done to simplify solving compile order issues. If you add `_pkg` to the name of the package file, it will be automatically placed at beginning of the compile list. Consider only having one package with `_pkg` and having it import other packages to ensure no compile order issues.

## Requirement

In order for the script to run you need to have the vivado bin directory in your `PATH`. Also consider adding the script to your `PATH` so you can access it from anywhere in your system.

The script will only scan the directory it's run in for modules other than the top module. While having the top module itself in a different directory would work, it is not recommended. 

## VSCode Task

If you're using vscode and want to use this script as a run task, you can add the script to your path then define the following task in your `tasks.json`:
```json
"tasks": [
    {
        "label": "Vivado simulator",
        "type": "shell",
        "command": "xsim_bash ${file} --nolog --delete"
    }
]
```